version: 1.2
mapping:
  VideoStream:
    args:
      webcam_id: 0
    processors:
    - FacialExpressionClassifier:
        processors:
        - SignalDivider:     # expressions
            triggers:
            - FacialExpressionTrigger:
                args:
                  name: "_neutral"
                  confidence: 0.5
                action:
                - KeyCommand:
                    args:
                      command:
                      - ''
            - FacialExpressionTrigger:
                args:
                  name: "mouthRight"
                  confidence: 0.5
                action:
                - MouseClick:
                    args:
                      key_name: left
            - FacialExpressionTrigger:
                args:
                  name: "mouthRight"
                  confidence: 0.5
                action:
                - KeyCommand:
                    args:
                      command:
                      - ''
            - FacialExpressionTrigger:
                args:
                  name: "eyeBlinkLeft"
                  confidence: 0.5
                action:
                - KeyCommand:
                    args:
                      command:
                      - ''
        - SignalDivider:     # landmarks
            args:
              index: 1
            triggers:
            - RegionOfInterest:       # nose in upper left corner
                args:
                  position: [0, 0]
                  size: [0.5, 0.5]
                  landmarks: [1]
                action:
                - Logger
            - RegionOfInterest:       # nose in upper right corner
                args:
                  position: [0.5, 0]
                  size: [0.5, 0.5]
                  landmarks: [1]
                action:
                - Logger
            - RegionOfInterest:       # nose in lower left corner
                args:
                  position: [0, 0.5]
                  size: [0.5, 0.5]
                  landmarks: [1]
                action:
                - Logger
            - RegionOfInterest:       # nose in lower right corner
                args:
                  position: [0.5, 0.5]
                  size: [0.5, 0.5]
                  landmarks: [1]
                action:
                - Logger
            - LandmarkDistance:       # mouth open
                args:
                  landmarks: [12, 15]
                  threshold: 0.02
                action:
                - Logger
            - LandmarkDistance:       # mouth close
                args:
                  landmarks: [12, 15]
                  threshold: 0.02
                  direction: "smaller"
                action:
                - Logger
            - LandmarkDistance:       # mouth small
                args:
                  landmarks: [61, 291]
                  threshold: 0.09
                  direction: "smaller"
                action:
                - Logger
            processors:
            - LandmarkEuroFilter:
                args:
                  min_cutoff: 1
                  beta: 0
                processors:
                - LandmarkNormalVector:
                    args:
                      landmark: 1
                      ref_landmarks:
                      - 33
                      - 263
                      - 61
                      - 291
                      - 199
                      tip_scale: 4
                    triggers:
                    - AbsoluteCursorControl:
                        action:
                        - MoveMouse
